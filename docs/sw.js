!function(){var e=navigator.userAgent||"",t=new BroadcastChannel("sw-messages");if(self.addEventListener("activate",function(e){}),self.onsystemmessage=function(e){try{var n=e.data.json();self.registration.showNotification("feedolin",{body:n.data.note})}catch(e){}try{e.waitUntil(function(){if("activity"===e.name){var n=(handler=e.data.webActivityRequestHandler()).source,a=n.name,i=n.data;if("feedolin"==a)return t.postMessage({oauth_success:i}),"OK"}}())}catch(e){}},!e.includes("KaiOS")){var n="pwa-cache-v0.1088";self.addEventListener("install",function(e){e.waitUntil(caches.open(n).then(function(e){return console.log("Opened cache"),fetch("/file-list.json").then(function(e){if(!e.ok)throw Error("HTTP error! Status: ".concat(e.status));return e.json()}).then(function(t){if(Array.isArray(t))return Promise.all(t.map(function(t){return e.add(t).catch(function(e){console.error("Failed to cache ".concat(t,":"),e)})}));console.error("Fetched data is not an array:",t)})}).then(function(){return self.skipWaiting()}))}),self.addEventListener("activate",function(e){var t=[n];e.waitUntil(caches.keys().then(function(e){return Promise.all(e.map(function(e){if(!t.includes(e))return caches.delete(e)}))}))}),self.addEventListener("fetch",function(e){e.respondWith(caches.match(e.request).then(function(t){return t||fetch(e.request)}))})}}();